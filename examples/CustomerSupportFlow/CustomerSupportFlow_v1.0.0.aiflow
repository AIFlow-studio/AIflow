{
  "metadata": {
    "name": "CustomerSupportFlow",
    "version": "1.0.0",
    "description": "AIFLOW project for customer support ticket triage and resolution.",
    "creator": "Marcel Spaan"
  },
  "flow": {
    "entry_agent": "agent1",
    "variables": {
      "language": "nl",
      "timezone": "Europe/Amsterdam",
      "ticket_text": "Ik kan niet inloggen sinds vanochtend. Krijg error 500 op /login."
    },
    "logic": [
      {
        "id": "rule1",
        "from": "agent1",
        "to": "agent2",
        "condition": "output.ticket_type == 'technical'"
      },
      {
        "id": "rule2",
        "from": "agent1",
        "to": "agent3",
        "condition": "output.ticket_type == 'billing'"
      },
      {
        "id": "rule3",
        "from": "agent2",
        "to": "agent3",
        "condition": "output.solution_found == true"
      }
    ]
  },
  "agents": [
    {
      "id": "agent1",
      "name": "TriageBot",
      "role": "Classifier",
      "retryPolicy": {
        "maxAttempts": 2,
        "retryOn": ["transient"]
      },
      "model": {
        "provider": "openai",
        "name": "gpt-4.2-mini",
        "temperature": 0.1,
        "max_tokens": 500
      },
      "prompt": "system_triage.txt",
      "instructions": "instructions_triage.md",
      "tools": [],
      "memory": "memory/schema.json",
      "output_format": "json",
      "executionStatus": "idle"
    },
    {
      "id": "agent2",
      "name": "TechSolver",
      "role": "Engineer",
      "retryPolicy": {
        "maxAttempts": 3,
        "retryOn": ["transient"]
      },
      "model": {
        "provider": "openai",
        "name": "gpt-4-turbo",
        "temperature": 0.4,
        "max_tokens": 2000
      },
      "prompt": "system_tech.txt",
      "instructions": "instructions_tech.md",
      "tools": ["web_search", "stack_overflow_api"],
      "memory": "memory/schema.json",
      "output_format": "json",
      "executionStatus": "idle"
    },
    {
      "id": "agent3",
      "name": "BillingSpecialist",
      "role": "Billing",
      "model": {
        "provider": "openai",
        "name": "gpt-4.2-mini",
        "temperature": 0.2,
        "max_tokens": 1200
      },
      "prompt": "system_billing.txt",
      "instructions": "instructions_billing.md",
      "tools": [],
      "memory": "memory/schema.json",
      "output_format": "json",
      "executionStatus": "idle"
    }
  ],
  "prompts": {
    "system_triage.txt": "You are a triage agent. Classify the ticket into: technical or billing. Respond in JSON with {\"ticket_type\": \"...\"}.",
    "system_tech.txt": "You are a technical support engineer. Diagnose and propose steps. Respond in JSON.",
    "system_billing.txt": "You are a billing support specialist. Respond in JSON."
  },
"tools": {
  "web_search": {
    "type": "http",
    "base_url": "https://example.invalid",
    "endpoint": "/web_search"
  },
  "stack_overflow_api": {
    "type": "http",
    "base_url": "https://api.stackexchange.com",
    "endpoint": "/2.3/search/advanced"
  }
}

}
