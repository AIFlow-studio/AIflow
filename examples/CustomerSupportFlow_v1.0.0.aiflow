{
  "metadata": {
    "name": "CustomerSupportFlow",
    "version": "1.0.0",
    "description": "Multi-agent flow for triaging and responding to customer support tickets."
  },
  "flow": {
    "start": "agent1",
    "variables": {
      "ticket_text": "My wifi is broken and the router keeps restarting."
    },
    "logic": [
      {
        "id": "route_network",
        "from": "agent1",
        "to": "agent2",
        "condition": "contains(classification, 'Network')"
      }
    ]
  },
  "agents": {
    "agent1": {
      "id": "agent1",
      "name": "TriageBot",
      "role": "Classifier",
      "description": "Classifies the incoming ticket and decides what type of issue it is.",
      "prompt": "triage_prompt",
      "output_format": "json",
      "provider": "google",
      "model": "gemini-2.5-flash"
    },
    "agent2": {
      "id": "agent2",
      "name": "ResponderBot",
      "role": "Responder",
      "description": "Writes a helpful response to the customer based on the classification and ticket details.",
      "prompt": "responder_prompt",
      "output_format": "text",
      "provider": "google",
      "model": "gemini-2.5-flash"
    }
  },
  "prompts": {
    "triage_prompt": "You are an AI assistant acting as a customer support triage agent.\n\nYou receive a support ticket from a customer.\nUse the provided context to decide what type of issue this is.\n\nContext:\n- Ticket text: {{ticket_text}}\n\nYour task:\n- Classify the ticket into a short category.\n- Use a single field called `classification`.\n\nOutput format (JSON):\n{\n  \"classification\": \"<short category such as 'Network Issue', 'Billing', 'Account', 'Hardware', 'Other'>\"\n}\n\nRespond ONLY with valid JSON, no extra commentary.",
    "responder_prompt": "You are an AI assistant acting as a customer support responder.\n\nYou receive a support ticket and a classification from a triage agent.\n\nContext:\n- Ticket text: {{ticket_text}}\n- Classification: {{classification}}\n\nYour task:\n- Write a clear, polite and helpful response to the customer.\n- Explain the likely cause at a high level.\n- Suggest 2â€“3 concrete troubleshooting steps.\n\nTone:\n- Empathetic, professional, concise.\n\nRespond in plain text, suitable to send as an email reply."
  }
}
